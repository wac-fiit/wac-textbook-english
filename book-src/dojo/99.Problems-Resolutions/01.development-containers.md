# Development Containers

>warning:> Maintaining templates for individual chapters is relatively labor-intensive, so consider this feature experimental. It is possible that the code generated by the template may lack some changes made in the chapter. In such cases, manual adjustments are necessary.

## Development Containers Templates

At the beginning of each chapter, the names of pre-created [Development Containers] templates are provided. These templates serve to initialize the project at the beginning of the chapter to the expected state, especially in cases where your project's content is inconsistent with the chapter's content or when you need to quickly synchronize the state with the current situation.

>warning:> Always apply templates in the `${WAC_ROOT}` directory. Templates may overwrite folder contents, so it is recommended to create a Git commit or stash and switch to a new branch before applying the template.

Alternatively, you can create a new folder `${WAC_ROOT}` and apply the template there. After applying the template, you can compare the folder contents and make the necessary changes in the original folder.

You can apply the template using the following procedure:

1. Install [Devcontainers CLI]:

```ps
npm install -g @devcontainers/cli
```

This step needs to be performed only once.

2. Create a file `${WAC_ROOT}/options.jsonc` with the following content - use your own prefixes and data:

```json
{
    // prefixes
    "pfx": "milung",
    "PfxCamel": "Milung",

    // accounts
    "dockerhubAccount": "milung",
    "githubAccount": "milung",
    // Personal access token
    "githubPAT": "your PAT"
}
```

3. Create or navigate to the `${WAC_ROOT}` directory and apply the corresponding template mentioned at the beginning of this chapter:

```ps
$Options = Get-Content -Path "options.jsonc" | ConvertFrom-Json | ConvertTo-Json -Compress
devcontainer templates apply -a "$Options" -t <template-name>
```

Example:

```ps
devcontainer templates apply -a "$Options" -t registry-1.docker.io/milung/wac-ufe-010
```

4. After applying the template, you will have content in the `${WAC_ROOT}` directory as mentioned at the beginning of this chapter. If there are any extra files in the directory, they will not be deleted, and you will need to remove them manually. Although file names are prefixed and account names are based on the values specified in the `options.jsonc` file, some file names will include the prefix `pfx` - renaming files is not supported by template application.

5. Templates do not include external libraries; you may need to execute the `npm install` or `go mod tidy` command to install libraries or deploy Flux to your Kubernetes cluster.

## Working in Development containers

After applying the template, you will have configuration for creating a Development Container in the `${WAC_ROOT}` directory, where you can develop.

Install the [Dev Containers](https://marketplace.visualstudio.com/items?itemName%253Dms-vscode-remote.remote-containers) extension in Visual Studio Code.

Open the `${WAC_ROOT}` folder in Visual Studio Code, and in the bottom right corner, you will see the **Reopen in Container** button. Clicking this button will create a container for you to develop in. Alternatively, you can create the container with the command `devcontainers up --workspaceFolder .` in the `${WAC_ROOT}` folder and then connect to it from Visual Studio Code using the **Dev Containers: Attach to Running Container...** command.

>warning:> The Development Container will include a complete set of development tools, contributing to the size of the pre-built container (on the order of several GB). The initial container creation may take several minutes; therefore, it is recommended to create the container well in advance before the exercise and on a network with good data throughput.
